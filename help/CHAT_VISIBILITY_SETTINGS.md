# Chat Visibility Settings - ุฏููู ุฅุนุฏุงุฏุงุช ุธููุฑ ุงูุดุงุช

## Overview - ูุธุฑุฉ ุนุงูุฉ

This document explains the new chat visibility settings that allow you to control who can see and use the chat widget on your WordPress website.

ูุดุฑุญ ูุฐุง ุงููุณุชูุฏ ุฅุนุฏุงุฏุงุช ุธููุฑ ุงูุดุงุช ุงูุฌุฏูุฏุฉ ุงูุชู ุชุชูุญ ูู ุงูุชุญูู ูู ูู ููููู ุฑุคูุฉ ูุงุณุชุฎุฏุงู ูุงูุฐุฉ ุงูุดุงุช ุนูู ูููุน WordPress ุงูุฎุงุต ุจู.

---

## Features - ุงููููุฒุงุช

### 1. Master Enable/Disable Switch
**Enable Chatbot Checkbox**
- Location: Settings โ Chat Settings โ Chat Widget Customization
- Purpose: Main on/off switch for the entire chat system
- When disabled: Chat widget will not appear anywhere on the site

**ุชูุนูู/ุชุนุทูู ุงูุดุงุช ุงูุฑุฆูุณู**
- ุงููููุน: ุงูุฅุนุฏุงุฏุงุช โ ุฅุนุฏุงุฏุงุช ุงูุดุงุช โ ุชุฎุตูุต ูุงูุฐุฉ ุงูุดุงุช
- ุงูุบุฑุถ: ุงูููุชุงุญ ุงูุฑุฆูุณู ูุชุดุบูู/ุฅููุงู ูุธุงู ุงูุดุงุช ุจุงููุงูู
- ุนูุฏ ุงูุชุนุทูู: ูู ุชุธูุฑ ูุงูุฐุฉ ุงูุดุงุช ูู ุฃู ููุงู ุนูู ุงููููุน

---

### 2. Chat Visibility Options
**Three visibility modes:**

#### Option 1: Show to Everyone (Default)
**Show to Everyone (Visitors & Logged-in Users)**
- Chat is visible to all website visitors
- Works for both guests and registered users
- Recommended for public-facing websites

**ุฅุธูุงุฑ ููุฌููุน (ุงูุฒูุงุฑ ูุงููุณุชุฎุฏููู ุงููุณุฌููู)**
- ูุธูุฑ ุงูุดุงุช ูุฌููุน ุฒูุงุฑ ุงููููุน
- ูุนูู ููุถููู ูุงููุณุชุฎุฏููู ุงููุณุฌููู
- ููุตู ุจู ููููุงูุน ุงูุนุงูุฉ

#### Option 2: Logged-in Users Only
**Show to Logged-in Users Only**
- Chat only appears for users who are logged into WordPress
- Visitors who are not logged in will NOT see the chat widget
- Perfect for membership sites, intranets, or private communities
- Adds an extra layer of exclusivity

**ุฅุธูุงุฑ ูููุณุชุฎุฏููู ุงููุณุฌููู ููุท**
- ูุธูุฑ ุงูุดุงุช ููุท ูููุณุชุฎุฏููู ุงููุณุฌููู ูู WordPress
- ุงูุฒูุงุฑ ุบูุฑ ุงููุณุฌููู ูู ูุฑูุง ูุงูุฐุฉ ุงูุดุงุช
- ูุซุงูู ูููุงูุน ุงูุนุถููุงุชุ ุงูุดุจูุงุช ุงูุฏุงุฎููุฉุ ุฃู ุงููุฌุชูุนุงุช ุงูุฎุงุตุฉ
- ูุถูู ุทุจูุฉ ุฅุถุงููุฉ ูู ุงูุญุตุฑูุฉ

#### Option 3: Visitors Only
**Show to Visitors Only (Not Logged-in)**
- Chat only appears for non-logged-in visitors
- Logged-in users will NOT see the chat widget
- Useful when you want to provide support only to potential customers
- Existing members can use other support channels

**ุฅุธูุงุฑ ููุฒูุงุฑ ููุท (ุบูุฑ ุงููุณุฌููู)**
- ูุธูุฑ ุงูุดุงุช ููุท ููุฒูุงุฑ ุบูุฑ ุงููุณุฌููู
- ุงููุณุชุฎุฏููู ุงููุณุฌููู ูู ูุฑูุง ูุงูุฐุฉ ุงูุดุงุช
- ูููุฏ ุนูุฏูุง ุชุฑูุฏ ุชูุฏูู ุงูุฏุนู ููุท ููุนููุงุก ุงููุญุชูููู
- ุงูุฃุนุถุงุก ุงูุญุงูููู ูููููู ุงุณุชุฎุฏุงู ูููุงุช ุฏุนู ุฃุฎุฑู

---

## How to Configure - ููููุฉ ุงูุถุจุท

### Step 1: Access Settings
1. Log into WordPress Admin Dashboard
2. Go to **GPT RAG Chat** โ **Settings**
3. Click on the **Chat Settings** tab

### ุงูุฎุทูุฉ 1: ุงููุตูู ููุฅุนุฏุงุฏุงุช
1. ุณุฌู ุงูุฏุฎูู ุฅูู ููุญุฉ ุชุญูู WordPress
2. ุงุฐูุจ ุฅูู **GPT RAG Chat** โ **ุงูุฅุนุฏุงุฏุงุช**
3. ุงููุฑ ุนูู ุชุจููุจ **ุฅุนุฏุงุฏุงุช ุงูุดุงุช**

### Step 2: Enable Chat
1. Check the **"Enable chatbot on front-end"** checkbox
2. This must be enabled for the chat to work

### ุงูุฎุทูุฉ 2: ุชูุนูู ุงูุดุงุช
1. ุถุน ุนูุงูุฉ ุนูู ุฎูุงุฑ **"ุชูุนูู ุงูุดุงุช ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ"**
2. ูุฌุจ ุชูุนูู ูุฐุง ุงูุฎูุงุฑ ููู ูุนูู ุงูุดุงุช

### Step 3: Choose Visibility
1. Find the **"Chat Visibility"** dropdown
2. Select your preferred option:
   - **Everyone** - For public access
   - **Logged-in Users Only** - For members only
   - **Visitors Only** - For non-members only

### ุงูุฎุทูุฉ 3: ุงุฎุชูุงุฑ ุงูุธููุฑ
1. ุงุจุญุซ ุนู ูุงุฆูุฉ **"ุธููุฑ ุงูุดุงุช"**
2. ุงุฎุชุฑ ุงูุฎูุงุฑ ุงูููุถู ูุฏูู:
   - **ุงูุฌููุน** - ูููุตูู ุงูุนุงู
   - **ุงููุณุชุฎุฏููู ุงููุณุฌููู ููุท** - ููุฃุนุถุงุก ููุท
   - **ุงูุฒูุงุฑ ููุท** - ูุบูุฑ ุงูุฃุนุถุงุก ููุท

### Step 4: Save Settings
1. Scroll to the bottom of the page
2. Click **"Save Settings"**
3. Wait for the success message

### ุงูุฎุทูุฉ 4: ุญูุธ ุงูุฅุนุฏุงุฏุงุช
1. ุงูุชูู ุฅูู ุฃุณูู ุงูุตูุญุฉ
2. ุงููุฑ ุนูู **"ุญูุธ ุงูุฅุนุฏุงุฏุงุช"**
3. ุงูุชุธุฑ ุฑุณุงูุฉ ุงููุฌุงุญ

---

## Security Features - ูููุฒุงุช ุงูุฃูุงู

### Server-Side Validation
The plugin validates chat visibility on both:
- **Frontend Display**: Chat widget won't render for unauthorized users
- **AJAX Requests**: API calls are blocked if user doesn't have permission

This prevents:
- Unauthorized access attempts
- Users bypassing frontend restrictions using browser tools
- API abuse

### ุงูุชุญูู ูู ุฌุงูุจ ุงูุฎุงุฏู
ูุชุญูู ุงูุฅุถุงูุฉ ูู ุธููุฑ ุงูุดุงุช ูู ููุง ูู:
- **ุนุฑุถ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ**: ูู ูุชู ุนุฑุถ ูุงูุฐุฉ ุงูุดุงุช ูููุณุชุฎุฏููู ุบูุฑ ุงููุตุฑุญ ููู
- **ุทูุจุงุช AJAX**: ูุชู ุญุธุฑ ุงุณุชุฏุนุงุกุงุช API ุฅุฐุง ูู ููู ูุฏู ุงููุณุชุฎุฏู ุฅุฐู

ูุฐุง ูููุน:
- ูุญุงููุงุช ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจูุง
- ุงููุณุชุฎุฏููู ูู ุชุฌุงูุฒ ูููุฏ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช ุงููุชุตูุญ
- ุฅุณุงุกุฉ ุงุณุชุฎุฏุงู API

---

## Use Cases - ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### Membership Sites
**Logged-in Users Only**
- Provide AI assistance exclusively to paying members
- Add value to premium membership tiers
- Reduce support load for non-members

**ุงููุณุชุฎุฏููู ุงููุณุฌููู ููุท**
- ุชูููุฑ ูุณุงุนุฏุฉ AI ุญุตุฑูุงู ููุฃุนุถุงุก ุงููุฏููุนูู
- ุฅุถุงูุฉ ูููุฉ ููุณุชููุงุช ุงูุนุถููุฉ ุงููููุฒุฉ
- ุชูููู ุนุจุก ุงูุฏุนู ูุบูุฑ ุงูุฃุนุถุงุก

### E-Commerce Sites
**Visitors Only**
- Help potential customers before they purchase
- Guide them through product selection
- Answer pre-sales questions
- Members can contact you directly

**ุงูุฒูุงุฑ ููุท**
- ูุณุงุนุฏุฉ ุงูุนููุงุก ุงููุญุชูููู ูุจู ุงูุดุฑุงุก
- ุฅุฑุดุงุฏูู ุฎูุงู ุงุฎุชูุงุฑ ุงูููุชุฌ
- ุงูุฅุฌุงุจุฉ ุนูู ุฃุณุฆูุฉ ูุง ูุจู ุงูุจูุน
- ุงูุฃุนุถุงุก ูููููู ุงูุงุชุตุงู ุจู ูุจุงุดุฑุฉ

### Public Information Sites
**Everyone**
- Maximum accessibility
- Answer general questions for all visitors
- Provide 24/7 automated assistance

**ุงูุฌููุน**
- ุฃูุตู ูุฏุฑ ูู ุฅููุงููุฉ ุงููุตูู
- ุงูุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ ุงูุนุงูุฉ ูุฌููุน ุงูุฒูุงุฑ
- ุชูููุฑ ูุณุงุนุฏุฉ ุขููุฉ ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ

---

## Technical Details - ุงูุชูุงุตูู ุงูุชูููุฉ

### Settings Storage
```php
// Setting name: chat_visibility
// Possible values:
'everyone'         // Default - show to all
'logged_in_only'   // Only logged-in users
'visitors_only'    // Only non-logged-in visitors
```

### Permission Check Function
```php
/**
 * Check if chat should be displayed
 * @return bool True if chat should display
 */
private function should_display_chat() {
    $settings = $this->settings;
    $chat_visibility = $settings['chat_visibility'] ?? 'everyone';
    $is_user_logged_in = is_user_logged_in();
    
    switch ($chat_visibility) {
        case 'logged_in_only':
            return $is_user_logged_in;
        case 'visitors_only':
            return !$is_user_logged_in;
        case 'everyone':
        default:
            return true;
    }
}
```

### AJAX Security Check
The plugin validates permissions before processing any chat query:
```php
// Validates on every chat message sent
if (!$can_use_chat) {
    wp_send_json_error([
        'message' => __('You do not have permission to use the chat.')
    ]);
}
```

---

## Troubleshooting - ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### Chat Not Showing for Anyone
**Problem**: Chat doesn't appear for any users

**Solution**:
1. Check **"Enable chatbot on front-end"** is checked
2. Verify Chat Visibility is not set to an incompatible option
3. Clear browser cache (Ctrl+F5)
4. Check WordPress cache plugin settings

**ุงููุดููุฉ**: ุงูุดุงุช ูุง ูุธูุฑ ูุฃู ูุณุชุฎุฏููู

**ุงูุญู**:
1. ุชุญูู ูู ุชูุนูู **"ุชูุนูู ุงูุดุงุช ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ"**
2. ุชุญูู ูู ุฃู ุฅุนุฏุงุฏ ุธููุฑ ุงูุดุงุช ููุณ ูุถุจูุทุงู ุนูู ุฎูุงุฑ ุบูุฑ ูุชูุงูู
3. ุงูุณุญ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุชุตูุญ (Ctrl+F5)
4. ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุฅุถุงูุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู WordPress

### Chat Shows When It Shouldn't
**Problem**: Chat appears for users it shouldn't

**Solution**:
1. Double-check the Chat Visibility setting
2. Verify user login status matches your expectation
3. Save settings again
4. Test in incognito/private browsing mode

**ุงููุดููุฉ**: ูุธูุฑ ุงูุดุงุช ูููุณุชุฎุฏููู ุงูุฐูู ูุง ููุจุบู ุฃู ูุธูุฑ ููู

**ุงูุญู**:
1. ุชุญูู ูุฑุฉ ุฃุฎุฑู ูู ุฅุนุฏุงุฏ ุธููุฑ ุงูุดุงุช
2. ุชุญูู ูู ุญุงูุฉ ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏู ุชุทุงุจู ุชููุนุงุชู
3. ุงุญูุธ ุงูุฅุนุฏุงุฏุงุช ูุฑุฉ ุฃุฎุฑู
4. ุงุฎุชุจุฑ ูู ูุถุน ุงูุชุตูุญ ุงูุฎูู/ุงูุฎุงุต

### Permission Error When Sending Message
**Problem**: Error message "You do not have permission to use the chat"

**Solution**:
1. This is working correctly - the user doesn't match visibility settings
2. Either:
   - Change visibility setting to include this user type
   - Ask user to log in (if set to logged-in only)
   - Ask user to log out (if set to visitors only)

**ุงููุดููุฉ**: ุฑุณุงูุฉ ุฎุทุฃ "ููุณ ูุฏูู ุฅุฐู ูุงุณุชุฎุฏุงู ุงูุดุงุช"

**ุงูุญู**:
1. ูุฐุง ูุนูู ุจุดูู ุตุญูุญ - ุงููุณุชุฎุฏู ูุง ูุทุงุจู ุฅุนุฏุงุฏุงุช ุงูุธููุฑ
2. ุฅูุง:
   - ุบููุฑ ุฅุนุฏุงุฏ ุงูุธููุฑ ููุดูู ูุฐุง ุงูููุน ูู ุงููุณุชุฎุฏููู
   - ุงุทูุจ ูู ุงููุณุชุฎุฏู ุชุณุฌูู ุงูุฏุฎูู (ุฅุฐุง ูุงู ูุถุจูุทุงู ุนูู ุงููุณุฌููู ููุท)
   - ุงุทูุจ ูู ุงููุณุชุฎุฏู ุชุณุฌูู ุงูุฎุฑูุฌ (ุฅุฐุง ูุงู ูุถุจูุทุงู ุนูู ุงูุฒูุงุฑ ููุท)

---

## Compatibility - ุงูุชูุงูู

### WordPress Requirements
- WordPress 5.0 or higher
- PHP 7.4 or higher
- Works with any theme
- Compatible with caching plugins (after cache clear)

### ูุชุทูุจุงุช WordPress
- WordPress 5.0 ุฃู ุฃุญุฏุซ
- PHP 7.4 ุฃู ุฃุญุฏุซ
- ูุนูู ูุน ุฃู ูุงูุจ
- ูุชูุงูู ูุน ุฅุถุงูุงุช ุงูุชุฎุฒูู ุงููุคูุช (ุจุนุฏ ูุณุญ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ)

### User Roles Supported
- **Logged-in**: All WordPress user roles (Administrator, Editor, Author, Contributor, Subscriber, Custom Roles)
- **Visitors**: Any non-logged-in user

### ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู ุงููุฏุนููุฉ
- **ูุณุฌููู**: ุฌููุน ุฃุฏูุงุฑ ูุณุชุฎุฏูู WordPress (ูุฏูุฑุ ูุญุฑุฑุ ูุงุชุจุ ูุณุงููุ ูุดุชุฑูุ ุฃุฏูุงุฑ ูุฎุตุตุฉ)
- **ุฒูุงุฑ**: ุฃู ูุณุชุฎุฏู ุบูุฑ ูุณุฌู

---

## Best Practices - ุฃูุถู ุงูููุงุฑุณุงุช

### 1. Test Before Going Live
- Test each visibility option in a staging environment
- Verify behavior for both logged-in and logged-out states
- Check mobile and desktop views

### 1. ุงุฎุชุจุฑ ูุจู ุงููุดุฑ
- ุงุฎุชุจุฑ ูู ุฎูุงุฑ ุธููุฑ ูู ุจูุฆุฉ ุงุฎุชุจุงุฑ
- ุชุญูู ูู ุงูุณููู ููู ูู ุงูุญุงูุงุช ุงููุณุฌูุฉ ูุบูุฑ ุงููุณุฌูุฉ
- ุชุญูู ูู ุนุฑูุถ ุงูููุจุงูู ูุณุทุญ ุงูููุชุจ

### 2. Communicate Changes
- If restricting chat access, inform your users
- Add a note on login page if chat requires authentication
- Provide alternative support channels

### 2. ุงูุชูุงุตู ุจุดุฃู ุงูุชุบููุฑุงุช
- ุฅุฐุง ููุช ุจุชูููุฏ ุงููุตูู ููุดุงุชุ ุฃุจูุบ ูุณุชุฎุฏููู
- ุฃุถู ููุงุญุธุฉ ุนูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ุฅุฐุง ูุงู ุงูุดุงุช ูุชุทูุจ ูุตุงุฏูุฉ
- ูููุฑ ูููุงุช ุฏุนู ุจุฏููุฉ

### 3. Monitor Usage
- Check Analytics to see chat usage patterns
- Adjust visibility settings based on user behavior
- Review logs regularly

### 3. ุฑุงูุจ ุงูุงุณุชุฎุฏุงู
- ุชุญูู ูู ุงูุชุญูููุงุช ูุฑุคูุฉ ุฃููุงุท ุงุณุชุฎุฏุงู ุงูุดุงุช
- ุงุถุจุท ุฅุนุฏุงุฏุงุช ุงูุธููุฑ ุจูุงุกู ุนูู ุณููู ุงููุณุชุฎุฏู
- ุฑุงุฌุน ุงูุณุฌูุงุช ุจุงูุชุธุงู

---

## Future Enhancements - ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

Possible future additions:
- Schedule-based visibility (show chat only during business hours)
- Role-based visibility (show to specific user roles)
- Page-specific visibility rules
- Geographic restrictions
- Device-based visibility (mobile vs desktop)

ุฅุถุงูุงุช ูุญุชููุฉ ูุณุชูุจูุงู:
- ุธููุฑ ุจูุงุกู ุนูู ุงูุฌุฏูู ุงูุฒููู (ุฅุธูุงุฑ ุงูุดุงุช ููุท ุฎูุงู ุณุงุนุงุช ุงูุนูู)
- ุธููุฑ ุจูุงุกู ุนูู ุงูุฏูุฑ (ุฅุธูุงุฑ ูุฃุฏูุงุฑ ูุญุฏุฏุฉ ูู ุงููุณุชุฎุฏููู)
- ููุงุนุฏ ุธููุฑ ุฎุงุตุฉ ุจุงูุตูุญุงุช
- ูููุฏ ุฌุบุฑุงููุฉ
- ุธููุฑ ุจูุงุกู ุนูู ุงูุฌูุงุฒ (ููุจุงูู ููุงุจู ุณุทุญ ุงูููุชุจ)

---

## Support - ุงูุฏุนู

For issues or questions about chat visibility settings:
1. Check this documentation first
2. Review the troubleshooting section
3. Check your WordPress and plugin versions
4. Contact support with:
   - Your visibility setting
   - User login status
   - Browser console errors (F12)
   - Screenshots if possible

ูููุดุงูู ุฃู ุงูุฃุณุฆูุฉ ุญูู ุฅุนุฏุงุฏุงุช ุธููุฑ ุงูุดุงุช:
1. ุฑุงุฌุน ูุฐุง ุงูุชูุซูู ุฃููุงู
2. ุฑุงุฌุน ูุณู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
3. ุชุญูู ูู ุฅุตุฏุงุฑุงุช WordPress ูุงูุฅุถุงูุฉ
4. ุงุชุตู ุจุงูุฏุนู ูุน:
   - ุฅุนุฏุงุฏ ุงูุธููุฑ ุงูุฎุงุต ุจู
   - ุญุงูุฉ ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏู
   - ุฃุฎุทุงุก ูุญุฏุฉ ุชุญูู ุงููุชุตูุญ (F12)
   - ููุทุงุช ุดุงุดุฉ ุฅู ุฃููู

---

**Last Updated**: October 2025  
**Version**: 2.0  
**Feature**: Chat Visibility Settings  

---

## Summary - ุงูููุฎุต

The chat visibility settings give you complete control over who can see and use your AI chat assistant. Whether you want to:
- Provide support to everyone
- Create an exclusive member benefit
- Focus on pre-sales support

These settings make it easy to configure your chat exactly how you need it.

ุชููุญู ุฅุนุฏุงุฏุงุช ุธููุฑ ุงูุดุงุช ุชุญููุงู ูุงููุงู ูู ูู ููููู ุฑุคูุฉ ูุงุณุชุฎุฏุงู ูุณุงุนุฏ ุงูุดุงุช AI. ุณูุงุก ููุช ุชุฑูุฏ:
- ุชูุฏูู ุงูุฏุนู ููุฌููุน
- ุฅูุดุงุก ููุฒุฉ ุญุตุฑูุฉ ููุฃุนุถุงุก
- ุงูุชุฑููุฒ ุนูู ุฏุนู ูุง ูุจู ุงูุจูุน

ุชุฌุนู ูุฐู ุงูุฅุนุฏุงุฏุงุช ูู ุงูุณูู ุชูููู ุงูุดุงุช ุงูุฎุงุต ุจู ุจุงูุถุจุท ููุง ุชุญุชุงุฌ.

**๐ Enjoy your new chat visibility controls! ุงุณุชูุชุน ุจุถูุงุจุท ุธููุฑ ุงูุดุงุช ุงูุฌุฏูุฏุฉ! ๐**


